var u=Object.defineProperty;var _=(n,t,e)=>t in n?u(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var a=(n,t,e)=>(_(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();class d{static createElement(t,e,i){const s=document.createElement(t);if(i!=null&&i.id&&(s.id=i.id),i!=null&&i.class&&(Array.isArray(i.class)?s.classList.add(...i.class):s.classList.add(i.class)),i!=null&&i.text&&(s.innerText=i.text),i!=null&&i.src&&"src"in s&&(s.src=i.src),i!=null&&i.dataset)for(const[o,l]of Object.entries(i.dataset))s.dataset[o]=l;if(i!=null&&i.styles)for(const[o,l]of Object.entries(i.styles))s.style[o]=l;return i!=null&&i.placeholder&&"placeholder"in s&&(s.placeholder=i.placeholder),e.appendChild(s)}static insertAdjacentHTML({into:t,at:e,HTML:i,returnElementWithSelector:s="NO-SELECTOR"}){if(t.insertAdjacentHTML(e,i),s==="NO-SELECTOR")return null;if(s.includes(",")){const o=[];return s.split(",").forEach(l=>{o.push(t.querySelector(l))}),o}else return t.querySelector(s)}static setVisibility(t,e){if(!(t instanceof Element)){console.warn("[setVisibility] No instanceof element:",t);return}t.classList[e?"remove":"add"]("hidden")}}class m{constructor(t){a(this,"_overlay");a(this,"_modal");this._container=t,this._container.classList.add("modal-container","hidden"),this._container.id="modal-container",this._createModalElements(),this._overlay.addEventListener("click",this._leaveModal.bind(this))}_createModalElements(){this._overlay=d.createElement("div",this._container,{class:"overlay"}),this._modal=d.createElement("div",this._overlay,{class:"modal"})}_leaveModal(){this._modal.innerHTML="",d.setVisibility(this._container,!1)}confirm(t){d.setVisibility(this._container,!0);const[e,i]=d.insertAdjacentHTML({into:this._modal,at:"beforeend",returnElementWithSelector:".cancel, .delete",HTML:`
        <p class="title-large title">Delete Note</p>
        <p class="text-extramedium prompt">Are you sure you want to delete this note?</p>
        <div class="buttons">
            <button class="button light cancel">Cancel</button>
            <button class="button dark delete">Delete</button>
        </div>
    `});e.addEventListener("click",this._leaveModal.bind(this)),i.addEventListener("click",()=>{t(!0)})}}class g{constructor(t,e){a(this,"_options");a(this,"_textareaElement");a(this,"_addButton");a(this,"_dragger");a(this,"_isDragging",!1);this._container=t,this._container.classList.add("textarea-container"),this._container.id="textarea-container",this._options=this._validateOptions(e||{}),this._createInnerElements(),this._addButton.addEventListener("click",this._handleClick.bind(this)),d.setVisibility(this._dragger,this._options.draggable??!0),this._options.draggable&&this._applyDragging()}get value(){return this._textareaElement.value}setValue(t){this._textareaElement.value=t}resetValue(){this.setValue("")}_validateOptions(t){var i,s,o;const e={...t};return e.draggable??(e.draggable=!0),e.placeholder??(e.placeholder="Type your note..."),e.addButton??(e.addButton={}),(i=e.addButton).classes??(i.classes=[]),(s=e.addButton).text??(s.text="Add"),e.handlers??(e.handlers={}),(o=e.handlers).add??(o.add=new Function),e}_createInnerElements(){var t,e;this._textareaElement=d.createElement("textarea",this._container,{placeholder:this._options.placeholder}),this._addButton=d.createElement("button",this._container,{class:["add","button","dark",...((t=this._options.addButton)==null?void 0:t.classes)||[]],text:(e=this._options.addButton)==null?void 0:e.text}),this._dragger=d.insertAdjacentHTML({into:this._container,at:"beforeend",returnElementWithSelector:".dragger",HTML:`
        <svg
          class="dragger"
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg">
            <path d="M15.333 12.3467V15.3333H12.3463L15.333 12.3467Z" fill="#3B3C3E" />
            <path d="M15.333 7.68002V10.32L10.3197 15.3334H7.67969L15.333 7.68002Z" fill="#5B5C5E" />
            <path d="M15.3331 3.01334V5.65334L5.65306 15.3333H3.01306L15.3331 3.01334Z" fill="#858686" />
        </svg>
      `})}_handleClick(){var t,e;this.value.trim()!==""&&(typeof((t=this._options.handlers)==null?void 0:t.add)=="function"&&((e=this._options.handlers)==null||e.add(this.value)),this.resetValue())}_applyDragging(){document.body.addEventListener("mousedown",t=>{t.target===this._dragger&&(document.body.style.userSelect="none",this._isDragging=!0)}),document.body.addEventListener("mousemove",t=>{this._isDragging&&(this._textareaElement.style.height=parseFloat(window.getComputedStyle(this._textareaElement).height)+t.movementY+"px")}),document.body.addEventListener("mouseup",()=>{document.body.style.userSelect="",this._isDragging=!1}),document.body.addEventListener("mouseleave",()=>{document.body.style.userSelect="",this._isDragging=!1})}}let c;const L=new Uint8Array(16);function y(){if(!c&&(c=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!c))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(L)}const r=[];for(let n=0;n<256;++n)r.push((n+256).toString(16).slice(1));function N(n,t=0){return r[n[t+0]]+r[n[t+1]]+r[n[t+2]]+r[n[t+3]]+"-"+r[n[t+4]]+r[n[t+5]]+"-"+r[n[t+6]]+r[n[t+7]]+"-"+r[n[t+8]]+r[n[t+9]]+"-"+r[n[t+10]]+r[n[t+11]]+r[n[t+12]]+r[n[t+13]]+r[n[t+14]]+r[n[t+15]]}const f=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),h={randomUUID:f};function E(n,t,e){if(h.randomUUID&&!t&&!n)return h.randomUUID();n=n||{};const i=n.random||(n.rng||y)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,N(i)}const v=["January","February","March","April","May","June","July","August","September","October","November","December"];class b{constructor(){a(this,"_now",new Date(Date.now()))}get monthAndDay(){return`${this.getMonthName()} ${this._now.getDate()}`}getMonthName(){return v[this._now.getMonth()+1]??"Easter egg by DasminX :)"}}class w{constructor(t,e){a(this,"id",E());a(this,"title");a(this,"_content");a(this,"_addedAt");a(this,"_noteHTMLElement");a(this,"_titleHTMLElement");this.title=t,this._content=e,this._addedAt=new b}get humanReadableDate(){return this._addedAt.monthAndDay}get content(){return this._content}set content(t){t.trim()!==""&&(this._content=t,this._titleHTMLElement.textContent=t)}insertHTMLInto(t){return this._noteHTMLElement=d.insertAdjacentHTML({into:t,at:"beforeend",returnElementWithSelector:`.note[data-id="${this.id}"]`,HTML:`
      <div class="note" data-id="${this.id}">
        <div class="titlebar">
          <p class="title-medium">${this.title}</p>
          <div class="controls">
            <svg
              class="edit icon-small"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16.875 12.1042L15.3958 10.625L16 10.0208C16.1111 9.90972 16.2569 9.85417 16.4375 9.85417C16.6181 9.85417 16.7639 9.90972 16.875 10.0208L17.4792 10.625C17.5903 10.7361 17.6458 10.8819 17.6458 11.0625C17.6458 11.2431 17.5903 11.3889 17.4792 11.5L16.875 12.1042ZM10 17.5V16.0208L14.5 11.5208L15.9792 13L11.4792 17.5H10ZM2.5 13.125V11.875H8.75V13.125H2.5ZM2.5 9.6875V8.4375H12.2917V9.6875H2.5ZM2.5 6.25V5H12.2917V6.25H2.5Z"
                  fill="#3B3C3E"
                />
              </svg>
              <svg
                class="remove icon-small"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M6.25 16.25H13.75V6.25H6.25V16.25ZM4.375 4.58333V3.33333H7.16667L8 2.5H12L12.8333 3.33333H15.625V4.58333H4.375ZM6.25 17.5C5.91667 17.5 5.625 17.375 5.375 17.125C5.125 16.875 5 16.5833 5 16.25V5H15V16.25C15 16.5833 14.875 16.875 14.625 17.125C14.375 17.375 14.0833 17.5 13.75 17.5H6.25ZM6.25 16.25H13.75H6.25Z"
                  fill="#3B3C3E"
                />
              </svg>
            </div>
          </div>
          <p class="body text-medium">${this.content}</p>
          <div class="adddate text-small">${this.humanReadableDate}</div>
        </div>
      `}),this._titleHTMLElement=this._noteHTMLElement.querySelector(".body"),this._noteHTMLElement}removeFromHTML(){this._noteHTMLElement.remove()}hideIfNotContaining(t){this._noteHTMLElement.classList.remove("hidden"),this.content.toLowerCase().includes(t)||this._noteHTMLElement.classList.add("hidden")}}class M{constructor(t){a(this,"_notes",new Array);this._listContainer=t}get length(){return this._notes.length}add(t,e){const i=new w(t,e);i.insertHTMLInto(this._listContainer),this._notes.push(i)}remove(t){this._notes=this._notes.filter(e=>e.id===t?(e.removeFromHTML(),!1):!0)}getNoteById(t){return this._notes.find(e=>e.id===t)??null}hideEveryNotContaining(t){this._notes.forEach(e=>{e.hideIfNotContaining(t.toLowerCase())})}}class C{constructor(t,e){a(this,"_searchInput");a(this,"_addNewNoteArea");a(this,"_addNewNoteInfo");a(this,"_addNewNoteCancelBtn");a(this,"_noNotesYetField");a(this,"_noNotesYetFieldAddNoteBtn");a(this,"_notesList");a(this,"_notesListAddNoteBtn");a(this,"_textarea");a(this,"_notesCollection");a(this,"_state");a(this,"_currentEditedNote");this._container=t,this._modal=e,this._searchInput=this._container.querySelector("#searchbar > input"),this._addNewNoteArea=this._container.querySelector("#addNewNote"),this._addNewNoteInfo=this._addNewNoteArea.querySelector(".infofield"),this._addNewNoteCancelBtn=this._addNewNoteArea.querySelector(".cancel"),this._noNotesYetField=this._container.querySelector("#noNotesYet"),this._noNotesYetFieldAddNoteBtn=this._noNotesYetField.querySelector(".button"),this._notesList=this._container.querySelector("#notesList"),this._notesListAddNoteBtn=this._notesList.querySelector(".button"),this._textarea=new g(this._container.querySelector(".customTextarea"),{handlers:{add:this._addNewNoteCallback.bind(this)}}),this._notesCollection=new M(this._notesList),this._state=this._setState("IDLE"),this._currentEditedNote=null,this._bindListeners()}_bindListeners(){this._searchInput.addEventListener("input",t=>{this._searchNotes(t)}),this._noNotesYetFieldAddNoteBtn.addEventListener("click",()=>{this._state=this._setState("ADDING")}),this._notesListAddNoteBtn.addEventListener("click",()=>{this._state=this._setState("ADDING")}),this._addNewNoteCancelBtn.addEventListener("click",()=>{this._state=this._setState("IDLE")}),this._notesList.addEventListener("click",this._notesListClickHandler.bind(this))}_setState(t){switch(d.setVisibility(this._noNotesYetField,this._notesCollection.length===0),d.setVisibility(this._notesListAddNoteBtn,this._notesCollection.length>0&&t==="IDLE"),d.setVisibility(this._addNewNoteArea,t!=="IDLE"),d.setVisibility(this._noNotesYetFieldAddNoteBtn,t==="IDLE"),t){case"IDLE":this._currentEditedNote=null,this._textarea.resetValue();break;case"ADDING":this._addNewNoteInfo.textContent="Add new note";break;case"EDITING":this._currentEditedNote!=null&&(this._addNewNoteInfo.textContent=`Edit ${this._currentEditedNote.title.toLowerCase()}`,this._textarea.setValue(this._currentEditedNote.content));break}return t}_searchNotes(t){!t.target||!("value"in t.target)||this._notesCollection.hideEveryNotContaining(t.target.value)}_notesListClickHandler(t){var i,s;if(!(t.target instanceof HTMLElement)&&!(t.target instanceof SVGElement))return;const e=(s=(i=t.target.closest(".note"))==null?void 0:i.dataset)==null?void 0:s.id;if(e!=null)if(t.target.classList.contains("edit")){const o=this._notesCollection.getNoteById(e);if(o==null)return;this._currentEditedNote=o,this._state=this._setState("EDITING")}else t.target.classList.contains("remove")&&this._modal.confirm(o=>{var l;o&&(this._notesCollection.remove(e),((l=this._currentEditedNote)==null?void 0:l.id)===e?this._state=this._setState("IDLE"):this._state=this._setState(this._state))})}_addNewNoteCallback(t){this._state==="EDITING"&&this._currentEditedNote!=null?(this._currentEditedNote.content=t,this._currentEditedNote=null):this._state==="ADDING"&&this._notesCollection.add(`Random note no. ${Math.random().toString().slice(2,6)}`,t),this._state=this._setState("IDLE")}}(()=>{const n=document.querySelector("#notesAppContainer");if(!(n instanceof HTMLElement))throw new Error("Notes app container does not exist. Leaving...");new C(n,new m(document.querySelector("#modalContainer")))})();
